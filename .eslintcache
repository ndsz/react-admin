[{"D:\\reactdemo\\react-admin\\src\\index.js":"1","D:\\reactdemo\\react-admin\\src\\App.js":"2","D:\\reactdemo\\react-admin\\src\\pages\\login\\login.js":"3","D:\\reactdemo\\react-admin\\src\\pages\\admin\\admin.jsx":"4","D:\\reactdemo\\react-admin\\src\\api\\ajax.js":"5","D:\\reactdemo\\react-admin\\src\\api\\index.js":"6","D:\\reactdemo\\react-admin\\src\\utils\\memoryUtils.js":"7","D:\\reactdemo\\react-admin\\src\\utils\\storageUtils.js":"8","D:\\reactdemo\\react-admin\\src\\components\\left-nav\\index.jsx":"9","D:\\reactdemo\\react-admin\\src\\pages\\user\\user.jsx":"10","D:\\reactdemo\\react-admin\\src\\pages\\home\\home.jsx":"11","D:\\reactdemo\\react-admin\\src\\config\\menuConfig.js":"12","D:\\reactdemo\\react-admin\\src\\pages\\charts\\pie.jsx":"13","D:\\reactdemo\\react-admin\\src\\pages\\category\\category.jsx":"14","D:\\reactdemo\\react-admin\\src\\pages\\charts\\line.jsx":"15","D:\\reactdemo\\react-admin\\src\\pages\\charts\\bar.jsx":"16","D:\\reactdemo\\react-admin\\src\\pages\\product\\product.jsx":"17","D:\\reactdemo\\react-admin\\src\\pages\\role\\role.jsx":"18","D:\\reactdemo\\react-admin\\src\\components\\header\\index.jsx":"19","D:\\reactdemo\\react-admin\\src\\pages\\category\\update-form.jsx":"20","D:\\reactdemo\\react-admin\\src\\components\\link-button\\index.jsx":"21","D:\\reactdemo\\react-admin\\src\\pages\\product\\detail.js":"22","D:\\reactdemo\\react-admin\\src\\pages\\product\\add-update.js":"23","D:\\reactdemo\\react-admin\\src\\pages\\product\\home.js":"24","D:\\reactdemo\\react-admin\\src\\pages\\product\\pro-cascader.js":"25","D:\\reactdemo\\react-admin\\src\\pages\\product\\pictures-wall.js":"26","D:\\reactdemo\\react-admin\\src\\pages\\product\\pro-rangePicker.js":"27","D:\\reactdemo\\react-admin\\src\\pages\\category\\add-form.jsx":"28","D:\\reactdemo\\react-admin\\src\\pages\\product\\calendar\\calendar.js":"29","D:\\reactdemo\\react-admin\\src\\pages\\product\\priceInput.js":"30","D:\\reactdemo\\react-admin\\src\\components\\antd-img-crop\\index.jsx":"31"},{"size":362,"mtime":1607684618873,"results":"32","hashOfConfig":"33"},{"size":585,"mtime":1607478058611,"results":"34","hashOfConfig":"33"},{"size":5634,"mtime":1609294091269,"results":"35","hashOfConfig":"33"},{"size":1788,"mtime":1609080078788,"results":"36","hashOfConfig":"33"},{"size":1090,"mtime":1607657529377,"results":"37","hashOfConfig":"33"},{"size":2809,"mtime":1609171322277,"results":"38","hashOfConfig":"33"},{"size":118,"mtime":1607678929225,"results":"39","hashOfConfig":"33"},{"size":483,"mtime":1607684273309,"results":"40","hashOfConfig":"33"},{"size":3053,"mtime":1608023100971,"results":"41","hashOfConfig":"33"},{"size":156,"mtime":1607936337735,"results":"42","hashOfConfig":"33"},{"size":156,"mtime":1607936185968,"results":"43","hashOfConfig":"33"},{"size":1071,"mtime":1607995490334,"results":"44","hashOfConfig":"33"},{"size":154,"mtime":1608000443668,"results":"45","hashOfConfig":"33"},{"size":7629,"mtime":1608254336511,"results":"46","hashOfConfig":"33"},{"size":156,"mtime":1608000431365,"results":"47","hashOfConfig":"33"},{"size":154,"mtime":1608000418231,"results":"48","hashOfConfig":"33"},{"size":551,"mtime":1608308443509,"results":"49","hashOfConfig":"33"},{"size":156,"mtime":1607936353899,"results":"50","hashOfConfig":"33"},{"size":2770,"mtime":1608136496195,"results":"51","hashOfConfig":"33"},{"size":1032,"mtime":1609294527176,"results":"52","hashOfConfig":"33"},{"size":194,"mtime":1608220046520,"results":"53","hashOfConfig":"33"},{"size":174,"mtime":1608308025943,"results":"54","hashOfConfig":"33"},{"size":7111,"mtime":1609915718074,"results":"55","hashOfConfig":"33"},{"size":3417,"mtime":1608862391005,"results":"56","hashOfConfig":"33"},{"size":3042,"mtime":1609175009277,"results":"57","hashOfConfig":"33"},{"size":6764,"mtime":1610016416509,"results":"58","hashOfConfig":"33"},{"size":1396,"mtime":1609919086678,"results":"59","hashOfConfig":"33"},{"size":1515,"mtime":1609294431944,"results":"60","hashOfConfig":"33"},{"size":25765,"mtime":1609830743785,"results":"61","hashOfConfig":"33"},{"size":1863,"mtime":1608978228407,"results":"62","hashOfConfig":"33"},{"size":9590,"mtime":1610016308303,"results":"63","hashOfConfig":"33"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"66"},"11osdav",{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"70","messages":"71","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"72","messages":"73","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"74","messages":"75","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"87"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"90"},{"filePath":"91","messages":"92","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"93"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"101","messages":"102","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"69"},{"filePath":"103","messages":"104","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"76"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"87"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"109","messages":"110","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"111","usedDeprecatedRules":"90"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"81"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"120","messages":"121","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"122","usedDeprecatedRules":"81"},{"filePath":"123","messages":"124","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"125","messages":"126","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"127","usedDeprecatedRules":"84"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"132","messages":"133","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"134","messages":"135","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"D:\\reactdemo\\react-admin\\src\\index.js",[],["138","139"],"D:\\reactdemo\\react-admin\\src\\App.js",[],["140","141"],"D:\\reactdemo\\react-admin\\src\\pages\\login\\login.js",[],"D:\\reactdemo\\react-admin\\src\\pages\\admin\\admin.jsx",[],"D:\\reactdemo\\react-admin\\src\\api\\ajax.js",[],["142","143"],"D:\\reactdemo\\react-admin\\src\\api\\index.js",[],"D:\\reactdemo\\react-admin\\src\\utils\\memoryUtils.js",[],["144","145"],"D:\\reactdemo\\react-admin\\src\\utils\\storageUtils.js",[],["146","147"],"D:\\reactdemo\\react-admin\\src\\components\\left-nav\\index.jsx",[],["148","149"],"D:\\reactdemo\\react-admin\\src\\pages\\user\\user.jsx",[],["150","151"],"D:\\reactdemo\\react-admin\\src\\pages\\home\\home.jsx",[],["152","153"],"D:\\reactdemo\\react-admin\\src\\config\\menuConfig.js",[],["154","155"],"D:\\reactdemo\\react-admin\\src\\pages\\charts\\pie.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\category\\category.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\charts\\line.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\charts\\bar.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\product.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\role\\role.jsx",[],"D:\\reactdemo\\react-admin\\src\\components\\header\\index.jsx",["156"],"import React, { Component } from 'react'\r\nimport { Icon, Modal, Button } from 'antd'\r\nimport { Link, withRouter } from 'react-router-dom'\r\nimport menuList from '../../config/menuConfig'\r\nimport memoryUtils from '../../utils/memoryUtils'\r\nimport storageUtils from '../../utils/storageUtils'\r\nimport moment from 'moment'\r\nimport { reqWeather } from '../../api'\r\n\r\nimport './index.less'\r\n\r\nclass Header extends Component {\r\n  state = {\r\n    currentTime: '', // 当前时间字符串\r\n    weather: ''\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.setIntervalbanner();\r\n    this.getWeather()\r\n  }\r\n\r\n  getWeather = async () => {\r\n    // 调用接口请求异步获取数据\r\n    const weather = await reqWeather('武汉')\r\n    // 更新状态\r\n    this.setState({weather})\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    clearInterval(this.currentTimeID);\r\n  }\r\n\r\n  setIntervalbanner = () => {\r\n    this.currentTimeID = setInterval(\r\n      () => this.queryCurrentTime(),\r\n      1000\r\n    );\r\n  }\r\n\r\n  queryCurrentTime = () => {\r\n    const currentTime = `${moment(new Date()).format('YYYY-MM-DD')} ${moment(new Date()).format('HH:mm:ss')}`;\r\n    this.setState({\r\n      currentTime,\r\n    });\r\n  }\r\n\r\n  getTitle = menuList => {\r\n    const path = this.props.location.pathname\r\n    let title = ''\r\n    function queryTitle(menuList) {\r\n      menuList.forEach(item => {\r\n        if (path === item.key) {\r\n          title = item.title\r\n        } else if (item.children) {\r\n          queryTitle(item.children)\r\n        }\r\n      })\r\n    }\r\n    queryTitle(menuList)\r\n    return title\r\n  }\r\n\r\n    /*\r\n  退出登陆\r\n   */\r\n  logout = () => {\r\n    // 显示确认框\r\n    Modal.confirm({\r\n      content: '确定退出吗?',\r\n      onOk: () => {\r\n        // 删除保存的user数据\r\n        storageUtils.removeUser()\r\n        memoryUtils.user = {}\r\n\r\n        // 跳转到login\r\n        this.props.history.replace('/login')\r\n      }\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const { currentTime, weather } = this.state\r\n    const title = this.getTitle(menuList)\r\n    return (\r\n      <div className=\"header\">\r\n        <div className=\"header-top\">\r\n          <span>欢迎，{memoryUtils.user.username}</span>\r\n          {/* <Link to=\"/login\">退出</Link> */}\r\n          <Button className='header-top-button' onClick={this.logout}>退出</Button>\r\n        </div>\r\n        <div className=\"header-bottom\">\r\n          <div className=\"header-bottom-left\">{title}</div>\r\n          <div className=\"header-bottom-right\">\r\n            <span>{currentTime}</span>\r\n            <Icon type=\"smile\" theme=\"twoTone\" twoToneColor=\"#52c41a\" style={{ fontSize: 18, margin: '0 15px' }} />\r\n            <span>{weather}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withRouter(Header)\r\n","D:\\reactdemo\\react-admin\\src\\pages\\category\\update-form.jsx",[],"D:\\reactdemo\\react-admin\\src\\components\\link-button\\index.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\detail.js",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\add-update.js",["157"],"D:\\reactdemo\\react-admin\\src\\pages\\product\\home.js",["158","159"],"import React, { Component } from 'react'\r\nimport { Card, Select, Input, Button, Table, Icon } from 'antd'\r\n\r\nimport {reqProducts, reqSearchProducts, reqUpdateStatus} from '../../api'\r\nimport {PAGE_SIZE} from '../../utils/constants'\r\n\r\nimport LinkButton from '../../components/link-button'\r\n\r\nconst { Option } = Select\r\n\r\nexport default class ProductHome extends Component {\r\n  state = {\r\n    searchType: 'productName',\r\n    searchName: '',\r\n    products: [], // 商品的数组\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.initColumns()\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getProducts(1)\r\n  }\r\n\r\n  getProducts = async (pageNum) => {\r\n    this.loading = true\r\n    const result = await reqProducts(pageNum, PAGE_SIZE)\r\n    this.loading = false\r\n    console.log('result', result)\r\n    if (result && result.status === 0) {\r\n      this.setState({\r\n        products: result.data.list\r\n      })\r\n    }\r\n  }\r\n\r\n  initColumns = () => {\r\n    this.columns = [\r\n      {\r\n        title: '商品名称',\r\n        dataIndex: 'name',\r\n      },\r\n      {\r\n        title: '商品描述',\r\n        dataIndex: 'desc',\r\n      },\r\n      {\r\n        title: '价格',\r\n        dataIndex: 'price',\r\n        render: (price) => '¥' + price  // 当前指定了对应的属性, 传入的是对应的属性值\r\n      },\r\n      {\r\n        width: 100,\r\n        title: '状态',\r\n        // dataIndex: 'status',\r\n        render: (product) => {\r\n          const {status, _id} = product\r\n          const newStatus = status===1 ? 2 : 1\r\n          return (\r\n            <span>\r\n              <Button\r\n                type='primary'\r\n                onClick={() => this.updateStatus(_id, newStatus)}\r\n              >\r\n                {status===1 ? '下架' : '上架'}\r\n              </Button>\r\n              <span>{status===1 ? '在售' : '已下架'}</span>\r\n            </span>\r\n          )\r\n        }\r\n      },\r\n      {\r\n        width: 100,\r\n        title: '操作',\r\n        render: (product) => {\r\n          return (\r\n            <span>\r\n              {/*将product对象使用state传递给目标路由组件*/}\r\n              <LinkButton onClick={() => this.props.history.push('/product/detail', {product})}>详情</LinkButton>\r\n              <LinkButton onClick={() => this.props.history.push('/product/addupdate', product)}>修改</LinkButton>\r\n            </span>\r\n          )\r\n        }\r\n      },\r\n    ];\r\n  }\r\n\r\n  render () {\r\n    const { searchType, searchName, products } = this.state\r\n    const title = (<span>\r\n      <Select value={searchType} style={{ width: 150 }} onChange={e => { this.setState({ searchType: e }) }}>\r\n        <Option value=\"productName\">按名称搜索</Option>\r\n        <Option value=\"productDesc\">按描述搜索</Option>\r\n      </Select >\r\n      <Input value={searchName} style={{width: 150, margin: '0 15px'}} onChange={event => this.setState({searchName:event.target.value})} />\r\n      <Button type='primary' onClick={() => this.getProducts(1)}>搜索</Button>\r\n    </span>)\r\n\r\n    const extra = (<span>\r\n      <Button type=\"primary\" onClick={() => this.props.history.push('/product/addupdate')}><Icon type='plus'/>添加商品</Button>\r\n    </span>)\r\n    return (\r\n      <Card title={title} extra={extra}>\r\n        <Table\r\n          bordered\r\n          loading={this.loading}\r\n          rowKey='_id'\r\n          dataSource={products}\r\n          columns={this.columns}\r\n        />\r\n      </Card>\r\n    )\r\n  }\r\n}","D:\\reactdemo\\react-admin\\src\\pages\\product\\pro-cascader.js",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\pictures-wall.js",["160","161"],"import React, { Component } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport { Upload, Modal, Icon, message } from 'antd';\r\nimport {reqDeleteImg} from '../../api'\r\nimport {BASE_IMG_URL} from \"../../utils/constants\"\r\nimport ImgCrop from '../../components/antd-img-crop'\r\nimport lrz from 'lrz'\r\n\r\nfunction getBase64(file) {\r\n  return new Promise((resolve, reject) => {\r\n    const reader = new FileReader();\r\n    reader.readAsDataURL(file);\r\n    reader.onload = () => resolve(reader.result);\r\n    reader.onerror = error => reject(error);\r\n  });\r\n}\r\n\r\nexport default class PicturesWall extends Component {\r\n\r\n  static propTypes = {\r\n    imgs: PropTypes.array\r\n  }\r\n\r\n  state = {\r\n    previewVisible: false, // 标识是否显示大图预览Modal\r\n    previewImage: '', // 大图的url\r\n    previewTitle: '',\r\n    fileList: [\r\n      // {\r\n      //   uid: '-1', // 每个file都有自己唯一的id\r\n      //   name: 'image.png', // 图片文件名\r\n      //   status: 'done', // 图片状态: done-已上传, uploading: 正在上传中, removed: 已删除, error被 beforeUpload 拦截的文件没有 status 属性\r\n      //   url: 'https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png',\r\n      // },\r\n      // {\r\n      //   uid: '-5',\r\n      //   name: 'image.png',\r\n      //   status: 'error',\r\n      // },\r\n    ],\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props)\r\n\r\n    let fileList = []\r\n\r\n    const { imgs } = props\r\n    if (imgs && imgs.length > 0) {\r\n      fileList = imgs.map((img, index) => ({\r\n        uid: -index, // 每个file都有自己唯一的id\r\n        name: img, // 图片文件名\r\n        status: 'done', // 图片状态: done-已上传, uploading: 正在上传中, removed: 已删除\r\n        url: BASE_IMG_URL + img\r\n      }))\r\n    }\r\n\r\n    // 初始化状态\r\n    this.state = {\r\n      previewVisible: false, // 标识是否显示大图预览Modal\r\n      previewImage: '', // 大图的url\r\n      fileList // 所有已上传图片的数组\r\n    }\r\n  }\r\n\r\n   /*\r\n    获取所有已上传图片文件名的数组\r\n   */\r\n  getImgs = () => {\r\n    return this.state.fileList.map(file => file.name)\r\n  }\r\n\r\n  // 隐藏modal\r\n  handleCancel = () => this.setState({ previewVisible: false });\r\n\r\n  dataUrltoFile = (dataurl, filename) => {\r\n    const arr = dataurl.split(',')\r\n    const mine = arr[0].match(/:(.*?);/)[1]\r\n    const bstr = atob(arr[1])\r\n    let n = bstr.length\r\n    const uBarr = new Uint8Array(n)\r\n    while(n--){\r\n      uBarr[n] = bstr.charCodeAt(n)\r\n    }\r\n    return new File([uBarr], filename, { type: mine })\r\n  }\r\n\r\n  backPromise = res => {\r\n    return new Promise((resolve, reject) => {\r\n      if (res instanceof Object) {\r\n        const file = this.dataUrltoFile(res.base64, res.origin.name)\r\n        Object.assign(file, {\r\n          uid: file.lastModified\r\n        })\r\n        resolve(file)\r\n      } else {\r\n        reject('压缩失败！')\r\n      }\r\n    })\r\n  }\r\n\r\n  compress = file => {\r\n    try {\r\n      let ratio = 1\r\n      debugger\r\n      const { size } = file\r\n      console.log('size', size, size / 1024)\r\n      if (size !== undefined && size > 102400) {\r\n        debugger\r\n        ratio = parseFloat(102400 / size)\r\n        return lrz(file, {\r\n          quality: ratio\r\n        }).then(rst => {\r\n          console.log('rst', rst)\r\n          return this.backPromise(rst)\r\n        }).catch(() => {\r\n          return false\r\n        })\r\n      }\r\n      return true\r\n    } catch (error) {\r\n      \r\n    }\r\n  }\r\n\r\n  beforeUpload = (file, fileList) => {\r\n    console.log('file', file, fileList)\r\n    const isJpgOrPng = file.type === 'image/jpeg' || file.type === 'image/png';\r\n    if (!isJpgOrPng) {\r\n      message.error('You can only upload JPG/PNG file!');\r\n    }\r\n    console.log('压缩前', file.size)\r\n    const p = this.compress(file)\r\n    console.log('压缩后', file.size)\r\n    console.log('p', p)\r\n    const isLt2M = file.size / 1024 / 1024 < 2;\r\n    // if (!isLt2M) {\r\n    //   message.error('Image must smaller than 2MB!');\r\n    // }\r\n    if (isJpgOrPng) {\r\n      return p\r\n    }\r\n    // return isJpgOrPng && isLt2M;\r\n    return false\r\n  }\r\n\r\n  handlePreview = async file => {\r\n    console.log('file', file)\r\n    // 显示指定file对应的大图\r\n    if (!file.url && !file.preview) {\r\n      file.preview = await getBase64(file.originFileObj);\r\n    }\r\n\r\n    this.setState({\r\n      previewImage: file.url || file.preview,\r\n      previewVisible: true,\r\n      previewTitle: file.name || file.url.substring(file.url.lastIndexOf('/') + 1),\r\n    });\r\n  };\r\n\r\n  /*\r\n  file: 当前操作的图片文件(上传/删除)\r\n  fileList: 所有已上传图片文件对象的数组\r\n   */\r\n  handleChange = async ({ file, fileList }) => {\r\n    console.log('handleChange()', file.status, file, fileList)\r\n    const result = file.response\r\n    // 一旦上传成功, 将当前上传的file的信息修正(name, url)\r\n    if (file.status === 'done') {\r\n      if(result.status===0) {\r\n        message.success('上传图片成功!')\r\n        const {name, url} = result.data\r\n        file = fileList[fileList.length-1]\r\n        file.name = name\r\n        file.url = url\r\n      } else {\r\n        message.error('上传图片失败')\r\n      }\r\n    } else if (file.status === 'removed') {\r\n      const result = await reqDeleteImg(file.name)\r\n      if (result.status===0) {\r\n        message.success('删除图片成功!')\r\n      } else {\r\n        message.error('删除图片失败!')\r\n      }\r\n    }\r\n    this.setState({ fileList })\r\n  };\r\n\r\n  render() {\r\n    const { previewVisible, previewImage, fileList, previewTitle } = this.state;\r\n    const uploadButton = (\r\n      <div>\r\n        <Icon type=\"plus\" />\r\n        <div style={{ marginTop: 8 }}>Upload</div>\r\n      </div>\r\n    );\r\n    return (\r\n      <div>\r\n        <ImgCrop\r\n          aspect={359 / 412}\r\n          modalWidth={800}\r\n          grid={false}\r\n          rotate={true}\r\n        >\r\n          <Upload\r\n            action=\"/manage/img/upload\" /*上传图片的接口地址*/\r\n            accept='image/*'  /*只接收图片格式*/\r\n            name='image' /*请求参数名*/\r\n            listType=\"picture-card\"  /*卡片样式*/\r\n            fileList={fileList}  /*所有已上传图片文件对象的数组*/\r\n            onPreview={this.handlePreview}\r\n            beforeUpload={this.beforeUpload}\r\n            onChange={this.handleChange}\r\n          >\r\n            {fileList.length >= 4 ? null : uploadButton}\r\n          </Upload>\r\n        </ImgCrop>\r\n        <Modal\r\n          visible={previewVisible}\r\n          // title={previewTitle}\r\n          footer={null}\r\n          onCancel={this.handleCancel}\r\n        >\r\n          <img alt=\"example\" style={{ width: '100%' }} src={previewImage} />\r\n        </Modal>\r\n      </div>\r\n    );\r\n  }\r\n}","D:\\reactdemo\\react-admin\\src\\pages\\product\\pro-rangePicker.js",[],"D:\\reactdemo\\react-admin\\src\\pages\\category\\add-form.jsx",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\calendar\\calendar.js",[],"D:\\reactdemo\\react-admin\\src\\pages\\product\\priceInput.js",[],"D:\\reactdemo\\react-admin\\src\\components\\antd-img-crop\\index.jsx",[],{"ruleId":"162","replacedBy":"163"},{"ruleId":"164","replacedBy":"165"},{"ruleId":"162","replacedBy":"166"},{"ruleId":"164","replacedBy":"167"},{"ruleId":"162","replacedBy":"168"},{"ruleId":"164","replacedBy":"169"},{"ruleId":"162","replacedBy":"170"},{"ruleId":"164","replacedBy":"171"},{"ruleId":"162","replacedBy":"172"},{"ruleId":"164","replacedBy":"173"},{"ruleId":"162","replacedBy":"174"},{"ruleId":"164","replacedBy":"175"},{"ruleId":"162","replacedBy":"176"},{"ruleId":"164","replacedBy":"177"},{"ruleId":"162","replacedBy":"178"},{"ruleId":"164","replacedBy":"179"},{"ruleId":"162","replacedBy":"180"},{"ruleId":"164","replacedBy":"181"},{"ruleId":"182","severity":1,"message":"183","line":3,"column":10,"nodeType":"184","messageId":"185","endLine":3,"endColumn":14},{"ruleId":"182","severity":1,"message":"186","line":101,"column":43,"nodeType":"184","messageId":"185","endLine":101,"endColumn":49},{"ruleId":"182","severity":1,"message":"187","line":4,"column":22,"nodeType":"184","messageId":"185","endLine":4,"endColumn":39},{"ruleId":"182","severity":1,"message":"188","line":4,"column":41,"nodeType":"184","messageId":"185","endLine":4,"endColumn":56},{"ruleId":"182","severity":1,"message":"189","line":136,"column":11,"nodeType":"184","messageId":"185","endLine":136,"endColumn":17},{"ruleId":"182","severity":1,"message":"190","line":191,"column":53,"nodeType":"184","messageId":"185","endLine":191,"endColumn":65},"no-native-reassign",["191"],"no-negated-in-lhs",["192"],["191"],["192"],["191"],["192"],["191"],["192"],["191"],["192"],["191"],["192"],["191"],["192"],["191"],["192"],["191"],["192"],"no-unused-vars","'Link' is defined but never used.","Identifier","unusedVar","'detail' is assigned a value but never used.","'reqSearchProducts' is defined but never used.","'reqUpdateStatus' is defined but never used.","'isLt2M' is assigned a value but never used.","'previewTitle' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]